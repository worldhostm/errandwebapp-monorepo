# 심부름 웹앱 페이지 동작 Use Case 시나리오

## 🎯 주요 사용자 시나리오

### 1. 신규 사용자 회원가입 및 로그인

**시나리오**: 처음 방문한 사용자가 회원가입 후 로그인하는 과정

**단계별 동작**:
1. 메인 페이지 접속
2. 헤더 우측 "로그인" 버튼 클릭
3. 인증 모달 팝업 표시
4. "회원가입" 탭으로 전환
5. 이름, 이메일, 비밀번호, 비밀번호 확인 입력
6. "회원가입" 버튼 클릭
7. 자동으로 로그인 처리되며 모달 닫힘
8. 헤더에 사용자 이름과 "로그아웃" 버튼 표시
9. "심부름 등록" 버튼 활성화

**예상 결과**:
- ✅ 사용자 상태가 로그인으로 변경
- ✅ 심부름 등록 권한 획득
- ✅ 개인화된 UI 표시

---

### 2. 기존 사용자 로그인

**시나리오**: 기존 회원이 이메일/비밀번호로 로그인

**단계별 동작**:
1. "로그인" 버튼 클릭
2. 인증 모달에서 이메일, 비밀번호 입력
3. "로그인" 버튼 클릭
4. 인증 성공 시 모달 닫힘
5. 로그인 상태로 UI 변경

**대안 흐름**:
- 소셜 로그인: "네이버로 로그인" 또는 "카카오로 로그인" 버튼 클릭

**예상 결과**:
- ✅ 빠른 인증 완료
- ✅ 개인 맞춤 콘텐츠 표시

---

### 3. 심부름 요청 등록

**시나리오**: 로그인한 사용자가 새로운 심부름을 등록하는 과정

**단계별 동작**:
1. 헤더의 "심부름 등록" 버튼 클릭
2. 심부름 등록 모달 팝업
3. **기본 정보 입력**:
   - 제목: "편의점에서 음료 구매"
   - 카테고리: "쇼핑/구매" 선택
   - 상세 설명: "세븐일레븐에서 콜라 2개 구매해주세요"
4. **조건 설정**:
   - 보상 금액: "5000" 입력
   - 마감 시간: 날짜/시간 선택기로 설정
5. **위치 선택**:
   - 지도에서 원하는 위치 클릭
   - "✓ 위치 선택됨" 메시지 확인
6. "심부름 등록하기" 버튼 클릭
7. 모달 닫힘 및 새 심부름이 목록/지도에 추가

**유효성 검사**:
- 위치 미선택 시 "지도에서 위치를 선택해주세요" 경고
- 필수 필드 누락 시 입력 요청

**예상 결과**:
- ✅ 새 심부름이 "대기중" 상태로 등록
- ✅ 지도에 노란색 마커로 표시
- ✅ 목록에 카드 형태로 표시

---

### 4. 지도에서 심부름 탐색 및 확인

**시나리오**: 사용자가 지도를 통해 주변 심부름을 찾고 상세정보를 확인

**단계별 동작**:
1. 메인 페이지 로딩 시 사용자 현재 위치 획득
2. 카카오 지도에 사용자 위치와 심부름 마커들 표시
3. **마커 상태별 구분**:
   - 노란 마커: 대기중 심부름
   - 파란 마커: 진행중 심부름  
   - 초록 마커: 완료된 심부름
4. 심부름 마커 클릭
5. 상세 정보 팝업 표시:
   - 제목, 설명
   - 보상 금액
   - 상태 (대기중/진행중/완료)
6. "심부름 수락하기" 버튼 (대기중 상태인 경우)
7. 팝업 닫기 (✕ 버튼 클릭)

**상호작용**:
- 지도 드래그로 다른 지역 탐색 가능
- 줌 인/아웃으로 범위 조절

**예상 결과**:
- ✅ 실시간 위치 기반 심부름 표시
- ✅ 직관적인 시각적 정보 제공
- ✅ 빠른 상세 정보 접근

---

### 5. 심부름 목록에서 수락 및 채팅

**시나리오**: 목록에서 관심있는 심부름을 찾아 수락하거나 채팅을 시작

**단계별 동작**:
1. 메인 페이지 하단 "최근 심부름 목록" 섹션 확인
2. 심부름 카드에서 다음 정보 확인:
   - 제목, 설명
   - 보상 금액
   - 카테고리
   - 상태 (대기중/진행중/완료)
3. **로그인한 사용자, 대기중 심부름인 경우**:
   - "수락하기" 버튼 표시
   - "채팅하기" 버튼 표시
4. **채팅하기 클릭**:
   - 채팅 모달 팝업
   - 상대방 이름과 심부름 제목 표시
   - 기존 대화 내역 로드 (샘플 메시지)
   - 실시간 메시지 입력/전송 가능
5. **수락하기 클릭**:
   - 심부름 상태 변경 예정 (현재는 UI만 구현)

**예상 결과**:
- ✅ 카드 기반 직관적 정보 표시
- ✅ 즉시 소통 가능한 채팅 연결
- ✅ 간편한 수락 프로세스

---

### 6. 실시간 채팅 이용

**시나리오**: 심부름 요청자와 수행자 간의 실시간 채팅

**단계별 동작**:
1. 채팅 모달 열기 (심부름 카드에서 "채팅하기" 클릭)
2. **채팅 인터페이스 확인**:
   - 상단: 상대방 이름, 심부름 제목
   - 중앙: 메시지 영역 (자동 스크롤)
   - 하단: 메시지 입력창과 전송 버튼
3. **메시지 전송**:
   - 텍스트 입력 후 "전송" 버튼 클릭
   - 또는 Enter 키로 전송
4. **메시지 표시**:
   - 내 메시지: 우측 정렬, 파란색 배경
   - 상대방 메시지: 좌측 정렬, 회색 배경
   - 각 메시지에 시간 표시 (HH:MM 형식)
5. 자동 스크롤로 최신 메시지 확인
6. ✕ 버튼으로 채팅 종료

**실시간 기능**:
- 메시지 전송 즉시 화면에 표시
- 자동 하단 스크롤
- 빈 메시지 전송 방지

**예상 결과**:
- ✅ 원활한 의사소통 지원
- ✅ 직관적인 채팅 인터페이스
- ✅ 실시간 메시지 교환

---

## 🔄 상태별 UI 변화

### 로그인 전 (비회원)
- 헤더: "로그인" 버튼만 표시
- 심부름 목록: 상세정보만 표시, 수락/채팅 버튼 없음
- 지도: 조회만 가능, 위치 선택 불가

### 로그인 후 (회원)
- 헤더: "심부름 등록" 버튼, 사용자명, "로그아웃" 버튼
- 심부름 목록: "수락하기", "채팅하기" 버튼 활성화
- 지도: 모든 기능 사용 가능

### 심부름 상태별
- **대기중**: 노란색 마커/배경, 수락 가능
- **진행중**: 파란색 마커/배경, 수락 불가
- **완료**: 초록색 마커/배경, 수락 불가

---

## 🎨 반응형 디자인 동작

### 모바일 환경
- 지도 높이 자동 조절
- 모달 화면 크기에 맞게 조정
- 터치 최적화된 버튼 크기
- 카드 레이아웃 단일 컬럼으로 변경

### 데스크톱 환경  
- 지도 더 넓은 영역 활용
- 모달 고정 크기로 표시
- 카드 그리드 레이아웃 (3컬럼)
- 마우스 호버 효과 적용

---

## ⚠️ 예외 상황 처리

### 위치 권한 거부
- 서울 시청 기본 좌표 (37.5665, 126.9780) 사용
- 사용자에게 위치 권한 요청 안내 가능

### 네트워크 오류
- 지도 로딩 실패 시 회색 placeholder 표시
- "지도를 로딩 중..." 메시지

### 필수 입력 누락
- 브라우저 기본 유효성 검사 활용
- 커스텀 경고 메시지 (위치 선택 등)

---

## 🚀 현재 구현 상태

### ✅ 완전 구현
- 사용자 인증 UI (로그인/회원가입)
- 지도 연동 및 마커 표시
- 심부름 등록 폼
- 실시간 채팅 인터페이스
- 반응형 디자인

### 🔄 부분 구현 (UI만)
- 심부름 수락 기능 (버튼만 존재)
- 소셜 로그인 (UI만, API 연동 필요)

### ❌ 미구현 (백엔드 필요)
- 실제 사용자 인증
- 심부름 데이터 저장/조회
- WebSocket 기반 실시간 채팅
- 푸시 알림

---

**개발 완료일**: 2025-08-31  
**Next.js App Router**: ✅ 호환성 확보  
**TypeScript**: ✅ 타입 안전성 검증 완료